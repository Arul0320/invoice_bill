{% extends 'billing/base.html' %}
{% block title %}Invoice Detail{% endblock %}
{% block content %}
<h1 class="text-2xl font-bold mb-4">Invoice {{ invoice.invoice_no }}</h1>
<p><strong>Customer:</strong> {{ invoice.customer.name }}</p>
<p><strong>Date:</strong> {{ invoice.date }}</p>

<table class="w-full mt-4 border">
    <tr class="bg-gray-200">
        <th class="p-2 border">Product</th>
        <th class="p-2 border">Qty</th>
        <th class="p-2 border">Price</th>
        <th class="p-2 border">Tax</th>
        <th class="p-2 border">Line Total</th>
    </tr>
    {% for item in invoice.items.all %}
    <tr>
        <td class="p-2 border">{{ item.product.name }}</td>
        <td class="p-2 border">{{ item.qty }}</td>
        <td class="p-2 border">₹{{ item.price }}</td>
        <td class="p-2 border">₹{{ item.tax_amount }}</td>
        <td class="p-2 border">₹{{ item.line_total }}</td>
    </tr>
    {% endfor %}
</table>

<div class="mt-4 text-right">
    <p>Subtotal: ₹{{ invoice.subtotal }}</p>
    <p>Tax: ₹{{ invoice.tax_total }}</p>
    <p class="font-bold">Grand Total: ₹{{ invoice.grand_total }}</p>
</div>

<a href="{% url 'export_invoice_pdf' invoice.id %}" class="bg-green-600 text-white px-4 py-2 rounded mt-4 inline-block">Download PDF</a>
{% endblock %}
